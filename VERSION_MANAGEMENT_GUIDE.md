# ç‰ˆæœ¬ç®¡ç†æŒ‡å—

## ğŸš€ è‡ªåŠ¨åŒ–ç‰ˆæœ¬æ›´æ–°

ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬æ¥åŒæ­¥æ›´æ–°æ‰€æœ‰æ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼

## ğŸ“‹ ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ç‰ˆæœ¬æ›´æ–°

```bash
# æ›´æ–°è¡¥ä¸ç‰ˆæœ¬ (0.0.1 -> 0.0.2)
npm run version:patch

# æ›´æ–°æ¬¡ç‰ˆæœ¬ (0.0.2 -> 0.1.0)
npm run version:minor

# æ›´æ–°ä¸»ç‰ˆæœ¬ (0.1.0 -> 1.0.0)
npm run version:major

# è®¾ç½®ç‰¹å®šç‰ˆæœ¬å·
npm run version:set 2.1.3
```

### 2. Git æ ‡ç­¾ç®¡ç†

```bash
# ä¸ºå½“å‰ç‰ˆæœ¬åˆ›å»º Git æ ‡ç­¾
npm run tag:create

# åˆ›å»ºæ ‡ç­¾å¹¶è‡ªåŠ¨æäº¤æœªæäº¤çš„æ›´æ”¹
npm run tag:push

# å¼ºåˆ¶è¦†ç›–å·²å­˜åœ¨çš„æ ‡ç­¾
npm run tag:create --force
```

### 3. å®Œæ•´å‘å¸ƒæµç¨‹ ğŸš€

```bash
# å®Œæ•´å‘å¸ƒæµç¨‹ï¼šæ›´æ–°ç‰ˆæœ¬ â†’ æ„å»ºéªŒè¯ â†’ åˆ›å»ºæ ‡ç­¾ â†’ æ¨é€
npm run release:patch   # è¡¥ä¸ç‰ˆæœ¬å‘å¸ƒ
npm run release:minor   # æ¬¡ç‰ˆæœ¬å‘å¸ƒ 
npm run release:major   # ä¸»ç‰ˆæœ¬å‘å¸ƒ

# å¿«é€Ÿå‘å¸ƒï¼ˆè·³è¿‡æ„å»ºéªŒè¯ï¼‰
npm run release:quick
```

### 4. è‡ªåŠ¨æ›´æ–°çš„æ–‡ä»¶

è„šæœ¬ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°ä»¥ä¸‹æ–‡ä»¶ï¼š
- âœ… `package.json`
- âœ… `src-tauri/Cargo.toml`
- âœ… `src-tauri/tauri.conf.json`

### 5. å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹

#### æ–¹å¼ä¸€ï¼šä¸€é”®å‘å¸ƒï¼ˆæ¨èï¼‰ ğŸ¯

```bash
# ä¸€æ¡å‘½ä»¤å®Œæˆæ‰€æœ‰æ­¥éª¤
npm run release:patch

# å‘å¸ƒæµç¨‹åŒ…å«ï¼š
# 1. æ›´æ–°ç‰ˆæœ¬å· (0.2.0 -> 0.2.1)
# 2. æ„å»ºåº”ç”¨éªŒè¯
# 3. è‡ªåŠ¨æäº¤æ›´æ”¹
# 4. åˆ›å»º Git æ ‡ç­¾ (v0.2.1)
# 5. æ¨é€åˆ°è¿œç¨‹ä»“åº“
```

#### æ–¹å¼äºŒï¼šåˆ†æ­¥éª¤å‘å¸ƒ ğŸ”§

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm run version:patch

# 2. æ‰‹åŠ¨æµ‹è¯•å’ŒéªŒè¯
npm run tauri:dev

# 3. æ„å»ºåº”ç”¨
npm run tauri:build

# 4. æäº¤æ›´æ”¹å¹¶åˆ›å»ºæ ‡ç­¾
npm run tag:push
```

#### æ–¹å¼ä¸‰ï¼šè‡ªå®šä¹‰å‘å¸ƒ âš™ï¸

```bash
# æ›´æ–°åˆ°æŒ‡å®šç‰ˆæœ¬
npm run version:set 2.1.0

# åˆ›å»ºæ ‡ç­¾ï¼ˆå¤„ç†å†²çªï¼‰
npm run tag:create --force

# æˆ–è€…è·³è¿‡æ„å»ºçš„å¿«é€Ÿå‘å¸ƒ
npm run release:quick
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰ç‰ˆæœ¬å·è§„åˆ™

å¦‚æœéœ€è¦é¢„å‘å¸ƒç‰ˆæœ¬ï¼ˆå¦‚ `1.0.0-beta.1`ï¼‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```bash
npm run version:set 1.0.0-beta.1
```

### ä¸ CI/CD é›†æˆ

åœ¨ GitHub Actions ä¸­ä½¿ç”¨ï¼š

```yaml
- name: Update version
  run: npm run version:patch

- name: Build app
  run: npm run tauri:build
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
project/
â”œâ”€â”€ package.json              # å‰ç«¯é¡¹ç›®ç‰ˆæœ¬
â”œâ”€â”€ src-tauri/
â”‚   â”œâ”€â”€ Cargo.toml            # Rust é¡¹ç›®ç‰ˆæœ¬
â”‚   â””â”€â”€ tauri.conf.json       # Tauri é…ç½®ç‰ˆæœ¬
â””â”€â”€ scripts/
    â””â”€â”€ update-version.js     # è‡ªåŠ¨åŒ–è„šæœ¬
```

## ğŸ¯ ç‰ˆæœ¬è¯­ä¹‰

éµå¾ª [Semantic Versioning](https://semver.org/) è§„èŒƒï¼š

- **major**: ç ´åæ€§æ›´æ”¹ (1.0.0 -> 2.0.0)
- **minor**: æ–°åŠŸèƒ½æ·»åŠ  (1.0.0 -> 1.1.0)
- **patch**: é”™è¯¯ä¿®å¤ (1.0.0 -> 1.0.1)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. åœ¨æ›´æ–°ç‰ˆæœ¬å‰ï¼Œç¡®ä¿æ‰€æœ‰æ›´æ”¹éƒ½å·²æäº¤
2. æ„å»ºæµ‹è¯•é€šè¿‡åå†å‘å¸ƒæ–°ç‰ˆæœ¬
3. é‡è¦æ›´æ–°å»ºè®®åˆ›å»º Git tag æ ‡è®°
4. ç‰ˆæœ¬å·æ›´æ–°åä¼šè‡ªåŠ¨æ¸…ç†æ„å»ºç¼“å­˜

## ğŸ”„ å›æ»šç‰ˆæœ¬

å¦‚æœéœ€è¦å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼š

```bash
# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
npm run version:set 0.0.1

# æ¸…ç†æ„å»ºç¼“å­˜
cd src-tauri && cargo clean && cd ..
```

## ğŸ“‹ è„šæœ¬å‘½ä»¤æ€»è§ˆ

### ç‰ˆæœ¬ç®¡ç†å‘½ä»¤
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `npm run version:patch` | æ›´æ–°è¡¥ä¸ç‰ˆæœ¬ | 0.1.0 â†’ 0.1.1 |
| `npm run version:minor` | æ›´æ–°æ¬¡ç‰ˆæœ¬ | 0.1.0 â†’ 0.2.0 |
| `npm run version:major` | æ›´æ–°ä¸»ç‰ˆæœ¬ | 0.1.0 â†’ 1.0.0 |
| `npm run version:set X.Y.Z` | è®¾ç½®æŒ‡å®šç‰ˆæœ¬ | è®¾ç½®ä¸º 2.1.3 |

### æ ‡ç­¾ç®¡ç†å‘½ä»¤
| å‘½ä»¤ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `npm run tag:create` | åˆ›å»ºæ ‡ç­¾ | éœ€è¦æ‰‹åŠ¨æäº¤æ›´æ”¹ |
| `npm run tag:push` | åˆ›å»ºæ ‡ç­¾å¹¶æ¨é€ | è‡ªåŠ¨æäº¤æœªæäº¤çš„æ›´æ”¹ |
| `npm run tag:create --force` | å¼ºåˆ¶åˆ›å»ºæ ‡ç­¾ | è¦†ç›–å·²å­˜åœ¨çš„æ ‡ç­¾ |

### å®Œæ•´å‘å¸ƒå‘½ä»¤
| å‘½ä»¤ | åŠŸèƒ½ | åŒ…å«æ­¥éª¤ |
|------|------|----------|
| `npm run release:patch` | è¡¥ä¸ç‰ˆæœ¬å‘å¸ƒ | ç‰ˆæœ¬æ›´æ–° + æ„å»º + æ ‡ç­¾ + æ¨é€ |
| `npm run release:minor` | æ¬¡ç‰ˆæœ¬å‘å¸ƒ | ç‰ˆæœ¬æ›´æ–° + æ„å»º + æ ‡ç­¾ + æ¨é€ |
| `npm run release:major` | ä¸»ç‰ˆæœ¬å‘å¸ƒ | ç‰ˆæœ¬æ›´æ–° + æ„å»º + æ ‡ç­¾ + æ¨é€ |
| `npm run release:quick` | å¿«é€Ÿå‘å¸ƒ | è·³è¿‡æ„å»ºéªŒè¯ |

## ğŸ¯ æœ€ä½³å®è·µ

1. **æ—¥å¸¸å¼€å‘**ï¼šä½¿ç”¨ `npm run release:patch` è¿›è¡Œå°ç‰ˆæœ¬å‘å¸ƒ
2. **æ–°åŠŸèƒ½**ï¼šä½¿ç”¨ `npm run release:minor` å‘å¸ƒæ–°åŠŸèƒ½
3. **é‡å¤§æ›´æ–°**ï¼šä½¿ç”¨ `npm run release:major` å‘å¸ƒé‡å¤§ç‰ˆæœ¬
4. **æµ‹è¯•ç¯å¢ƒ**ï¼šä½¿ç”¨ `npm run release:quick` å¿«é€Ÿå‘å¸ƒæµ‹è¯•ç‰ˆæœ¬

## ğŸ”§ åˆ›å»ºçš„æ–‡ä»¶

- `scripts/update-version.js` - ç‰ˆæœ¬æ›´æ–°è„šæœ¬
- `scripts/create-tag.js` - Git æ ‡ç­¾ç®¡ç†è„šæœ¬
- `scripts/release.js` - å®Œæ•´å‘å¸ƒæµç¨‹è„šæœ¬

ç°åœ¨æ‚¨å†ä¹Ÿä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¤šä¸ªæ–‡ä»¶äº†ï¼ğŸ‰ 